{
  "metadata": {
    "project_name": "M5 Max Produções - Website",
    "generated_at": "2025-02-12T00:00:00Z",
    "version": "2.0.0",
    "generator": "Claude Code - RAG Documentation System",
    "description": "Complete RAG-optimized system memory for LLMs and development teams",
    "previous_version": "1.0.0 (Q&A format)",
    "codebase_stats": {
      "total_files": 159,
      "features": 4,
      "shared_hooks": 8,
      "ui_components": 46,
      "test_coverage_percent": 2.5,
      "tested_files": 7
    }
  },

  "architecture": {
    "pattern": "bifurcated",
    "description": "Desktop/Mobile separation at component level with 1024px breakpoint",
    "breakpoint_px": 1024,
    "implementation": {
      "detection_hook": {
        "name": "useIsDesktop",
        "file": "src/shared/hooks/useIsDesktop.ts",
        "line": 3,
        "media_query": "(min-width: 1024px)"
      },
      "platform_switch": {
        "name": "PlatformSwitch",
        "file": "src/shared/layout/switchers/PlatformSwitch.tsx",
        "props": ["desktop", "mobile", "fallback", "breakpoint"]
      }
    },
    "lazy_loading": {
      "enabled": true,
      "pattern": "React.lazy() + Suspense",
      "fallback_component": "PageLoading",
      "strategy": {
        "pages": "All page components lazy loaded",
        "desktop_sections": "LazySection with IntersectionObserver (100px margin)",
        "mobile_sections": "Immediate loading (no LazySection)"
      }
    },
    "consistency": "4/4 features follow bifurcated pattern"
  },

  "tech_stack": {
    "framework": "React",
    "framework_version": "18.3.1",
    "language": "TypeScript",
    "language_version": "5.8.3",
    "build_tool": "Vite",
    "build_version": "5.4.19",
    "compiler": "SWC",
    "state_management": {
      "library": "Zustand",
      "version": "5.0.8",
      "persistence": "localStorage"
    },
    "ui_framework": {
      "base": "shadcn/ui",
      "primitives": "Radix UI",
      "total_components": 46
    },
    "styling": {
      "framework": "Tailwind CSS",
      "utility": "class-variance-authority (CVA)",
      "merge": "clsx + tailwind-merge"
    },
    "forms": {
      "library": "React Hook Form",
      "validation": "Zod",
      "resolver": "@hookform/resolvers/zod"
    },
    "analytics": ["Google Analytics 4", "Meta Pixel (Facebook)", "Google Tag Manager"],
    "backend": "Supabase",
    "routing": "React Router DOM",
    "icons": ["lucide-react", "react-icons"],
    "media": ["react-youtube"],
    "testing": {
      "framework": "Vitest",
      "coverage": "2.5%"
    }
  },

  "features": [
    {
      "id": "home",
      "name": "Home",
      "route": "/",
      "description": "Homepage principal com hero, informações da empresa, serviços e FAQ",
      "category": "general",
      "files": {
        "page": "src/features/home/pages/HomePage.tsx",
        "desktop_container": "src/features/home/desktop/Home.tsx",
        "mobile_container": "src/features/home/mobile/Home.tsx",
        "desktop_components": ["src/features/home/desktop/components/Hero.tsx"],
        "mobile_components": ["src/features/home/mobile/components/Hero.tsx"],
        "data": ["src/features/home/data/homeContent.ts"],
        "index": "src/features/home/index.ts"
      },
      "sections": ["Hero", "FogosM5Complete", "Services", "FAQ"],
      "analytics": {
        "page_title": "M5 Max Produções",
        "page_category": "general"
      }
    },
    {
      "id": "reveillon",
      "name": "Reveillon",
      "route": "/reveillon",
      "description": "Página dedicada ao espetáculo de Réveillon 2025",
      "category": "reveillon",
      "files": {
        "page": "src/features/reveillon/pages/ReveillonPage.tsx",
        "desktop_container": "src/features/reveillon/desktop/Reveillon.tsx",
        "mobile_container": "src/features/reveillon/mobile/Reveillon.tsx"
      },
      "sections": ["ReveillonHero", "TimelineSection", "FogosM5Complete", "Services", "FAQ"]
    },
    {
      "id": "produtos",
      "name": "Produtos",
      "route": "/produtos",
      "description": "Catálogo de produtos (kits de festa, chá revelação) com Supabase",
      "category": "produtos",
      "supabase_integration": true
    },
    {
      "id": "orcamento-iate",
      "name": "Orçamento Iate",
      "route": "/orcamento-iate-2026",
      "description": "Página privada de orçamento para Iate Clube de Brasília 2026",
      "category": "b2b",
      "meta_robots": "noindex, nofollow"
    }
  ],

  "shared": {
    "hooks": [
      {
        "name": "useAnalytics",
        "file": "src/shared/hooks/useAnalytics.ts",
        "responsibility": "Complete analytics tracking (GA4, Meta Pixel, GTM)",
        "total_methods": 14,
        "key_methods": ["trackPageView", "trackFormEvent", "trackWhatsAppClick", "trackWebVitals", "trackPlatformSwitch", "trackSessionQuality"]
      },
      {
        "name": "useAttribution",
        "file": "src/shared/hooks/useAttribution.ts",
        "responsibility": "Capture and store attribution data (UTM + click IDs)"
      },
      {
        "name": "useIsDesktop",
        "file": "src/shared/hooks/useIsDesktop.ts",
        "responsibility": "Detect desktop vs mobile (1024px breakpoint)"
      },
      {
        "name": "usePlatformDetection",
        "file": "src/shared/hooks/usePlatformDetection.ts",
        "responsibility": "Track desktop ↔ mobile viewport switches",
        "phase": "FASE 3"
      },
      {
        "name": "useWebVitals",
        "file": "src/shared/hooks/useWebVitals.ts",
        "responsibility": "Automatic Core Web Vitals tracking",
        "phase": "FASE 3",
        "metrics": ["FCP", "LCP", "CLS", "FID", "TTFB", "INP"]
      },
      {
        "name": "useSupabaseProducts",
        "file": "src/shared/hooks/useSupabaseProducts.ts",
        "responsibility": "Load products from Supabase with caching",
        "cache_ttl_minutes": 5
      }
    ],

    "store": {
      "name": "appStore",
      "file": "src/shared/store/appStore.ts",
      "type": "Zustand",
      "persistence": {
        "enabled": true,
        "storage": "localStorage",
        "key": "m5max-storage",
        "persisted_fields": ["attribution", "consent", "currentAudience"]
      },
      "state_fields": ["attribution", "consent", "conversionModalOpen", "formModalOpen", "currentAudience"]
    },

    "ui_components": {
      "total": 46,
      "library": "shadcn/ui + Radix UI",
      "tested_count": 1,
      "categories": ["controls", "layout", "feedback", "navigation", "content", "forms", "media", "custom"]
    }
  },

  "integrations": {
    "analytics": {
      "platforms": ["Google Analytics 4", "Meta Pixel", "Google Tag Manager"],
      "events_total": 14,
      "consent_type": "GDPR",
      "attribution_captured": ["UTM params", "gclid", "fbclid", "referrer", "landing page"]
    },

    "supabase": {
      "tables": ["kit_festa", "kit_cha_revelacao", "tortas"],
      "cache_enabled": true,
      "cache_ttl_minutes": 5,
      "fallback": "Local data if unavailable"
    },

    "forms": {
      "library": "React Hook Form + Zod",
      "schemas": ["B2BFormSchema", "B2CFormSchema"],
      "lead_scoring": {
        "B2B_max_points": 165,
        "B2C_max_points": 155
      }
    }
  },

  "patterns": {
    "bifurcated_architecture": {
      "description": "Complete desktop/mobile separation at component level",
      "breakpoint_px": 1024,
      "advantages": ["Optimized UX per platform", "Independent development", "Code clarity", "Better performance"]
    },

    "lazy_loading": {
      "pattern": "React.lazy() + Suspense",
      "desktop_sections": "LazySection with IntersectionObserver",
      "mobile_sections": "Immediate load"
    },

    "analytics_tracking": {
      "pattern": "useAnalytics hook",
      "consent_check": "Before every event",
      "attribution_enrichment": "Automatic"
    }
  },

  "development": {
    "commands": {
      "dev": "npm run dev - Vite dev server (localhost:5173)",
      "build": "npm run build - Production build",
      "lint": "npm run lint - ESLint",
      "test": "npm run test - Vitest"
    },

    "conventions": {
      "imports": {
        "intra_feature": "Relative paths",
        "cross_feature": "Forbidden",
        "shared": "Aliases @shared/... or @/shared/..."
      },
      "naming": {
        "components": "PascalCase",
        "hooks": "useXxx",
        "types": "PascalCase interfaces"
      }
    },

    "testing": {
      "framework": "Vitest",
      "coverage_percent": 2.5,
      "priority_gaps": ["Forms", "Hooks", "UI Components", "E2E"]
    }
  },

  "quick_reference": {
    "env_vars_required": ["VITE_GTM_ID", "VITE_GA4_ID", "VITE_META_PIXEL_ID", "VITE_SUPABASE_URL", "VITE_SUPABASE_ANON_KEY"],

    "key_files": {
      "routing": "src/app/router/AppRoutes.tsx",
      "state": "src/shared/store/appStore.ts",
      "analytics": "src/shared/hooks/useAnalytics.ts",
      "config": "src/shared/lib/config.ts",
      "vite": "vite.config.ts"
    },

    "common_tasks": {
      "add_new_page": "Create in src/features/{feature}/pages/, add route to AppRoutes.tsx",
      "track_event": "Use useAnalytics() hook, call appropriate track method",
      "add_ui_component": "Create in src/shared/ui/, follow shadcn/ui patterns",
      "modify_consent": "Update ConsentBanner.tsx and appStore consent state"
    }
  }
}
